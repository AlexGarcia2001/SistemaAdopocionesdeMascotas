// public/frontend/js/lang.js

// Objeto que contiene todas las traducciones por idioma
const translations = {
    es: {
        appName: "Sistema de Adopciones",
        selectLanguage: "Seleccionar Idioma",
        footerText: "&copy; 2025 Sistema de Adopciones de Mascotas. Todos los derechos reservados.",
        welcomeTitle: "Bienvenido al Sistema de Adopciones",
        welcomeText: "Encuentra a tu compañero peludo perfecto o ayuda a una mascota a encontrar un hogar.",
        loginButton: "Iniciar Sesión",
        registerButton: "Registrarse",
        loginTitle: "Iniciar Sesión",
        loginUsernamePlaceholder: "Usuario (Email)",
        loginPasswordPlaceholder: "Contraseña",
        loginSubmitButton: "Entrar",
        loginRegisterLink: "¿No tienes cuenta? Regístrate aquí.",
        registrationTitle: "Registro de Usuario",
        registrationNamePlaceholder: "Nombre Completo",
        registrationEmailPlaceholder: "Correo Electrónico",
        registrationPasswordPlaceholder: "Contraseña",
        registrationConfirmPasswordPlaceholder: "Confirmar Contraseña",
        registrationSubmitButton: "Registrarse",
        registrationLoginLink: "¿Ya tienes cuenta? Inicia sesión aquí.",
        requiredField: "Este campo es obligatorio.",
        invalidEmail: "Por favor, introduce un correo electrónico válido.",
        passwordTooShort: "La contraseña debe tener al menos 6 caracteres.",
        passwordMismatch: "Las contraseñas no coinciden.",
        loginSuccess: "¡Inicio de sesión exitoso!",
        loginError: "Error de inicio de sesión.",
        registrationSuccess: "¡Registro exitoso! Ahora puedes iniciar sesión.",
        registrationError: "Error en el registro.",
        generalError: "Ocurrió un error inesperado. Por favor, inténtalo de nuevo.",
        unauthorizedError: "No autorizado. Por favor, inicia sesión.",
        noRecordsFound: "No se encontraron registros.",
        createSuccess: "¡Creación exitosa!",
        createError: "Error al crear el registro.",
        formCorrectionError: "Por favor, corrige los errores en el formulario.",

        // --- Traducciones para el Dashboard de Administrador ---
        adminDashboardTitle: "Panel de Administración",
        totalPetsAvailable: "Mascotas Disponibles",
        pendingAdoptions: "Solicitudes Pendientes",
        completedAdoptions: "Adopciones Completadas",
        manageUsers: '<i class="fas fa-users me-2"></i> Gestionar Usuarios',
        managePets: '<i class="fas fa-cat me-2"></i> Gestionar Mascotas',
        viewPetsList: '<i class="fas fa-paw me-2"></i> Ver Listado de Mascotas',
        manageAdoptionRequests: '<i class="fas fa-clipboard-list me-2"></i> Gestionar Solicitudes de Adopción',
        manageShelters: '<i class="fas fa-home me-2"></i> Gestionar Refugios', 
        manageEvents: '<i class="fas fa-calendar-alt me-2"></i> Gestionar Eventos', 
        viewStatistics: '<i class="fas fa-chart-bar me-2"></i> Ver Estadísticas y Reportes',
        logoutButton: "Cerrar Sesión",
        goToManageUsers: "Ir a Gestión de Usuarios",

        // --- Traducciones para la vista de mascotas (CRUD) ---
        petsAvailableForAdoption: "Mascotas Disponibles para Adopción",
        searchPlaceholder: "Buscar...",
        filterBySpecies: "Filtrar por Especie",
        filterBySize: "Filtrar por Tamaño",
        addPet: "Añadir Mascota",
        save: "Guardar Mascota",
        viewDetails: "Ver Detalles",
        adoptButton: "Adoptar",
        editButton: "Editar",
        deleteButton: "Eliminar",
        
        // Traducciones para el modal de detalles de mascota
        petDetailsTitle: "Detalles de la Mascota",
        petNameLabel: "Nombre:",
        speciesLabel: "Especie:",
        breedLabel: "Raza:",
        ageLabel: "Edad:",
        yearsLabel: "años",
        sexLabel: "Sexo:",
        sizeLabel: "Tamaño:",
        descriptionLabel: "Descripción:",
        rescueDateLabel: "Fecha de Rescate:",
        adoptionStatusLabel: "Estado de Adopción:",
        statusLabel: "Estado (Registro):",
        registeredByLabel: "Registrado por (ID Usuario):",
        shelterIdLabel: "ID Refugio:",
        closeButton: "Cerrar",

        // Traducciones para el modal de edición de mascota
        editPet: "Editar Mascota",
        saveChanges: "Guardar Cambios",
        updateSuccess: "¡Actualización exitosa!",
        updateError: "Error al actualizar el registro.",

        // Traducciones para la confirmación de eliminación con SweetAlert2
        confirmDeleteTitle: "¿Estás seguro?",
        confirmDeleteText: "¡No podrás revertir esto!",
        yesDeleteIt: "Sí, ¡eliminar!",
        deleteSuccess: "¡Eliminado!",
        deleteError: "Error al eliminar.",
        cancelButton: "Cancelar",
        
        // --- Traducciones para la Gestión de Usuarios (users.html) ---
        manageUsersTitle: "Gestionar Usuarios",
        searchUsersPlaceholder: "Buscar usuarios...",
        userId: "ID",
        userName: "Nombre",
        userLastName: "Apellido",
        userEmail: "Email",
        userRole: "Rol",
        userStatus: "Estado",
        actions: "Acciones",
        addUser: "Añadir Usuario",
        editUser: "Editar Usuario",
        userPassword: "Contraseña",
        saveUser: "Guardar Usuario",

        // --- Traducciones para la Gestión de Solicitudes de Adopción (solicitudes-adopcion.html) ---
        manageAdoptionRequestsTitle: "Gestionar Solicitudes de Adopción",
        searchRequestsPlaceholder: "Buscar solicitudes...",
        requestId: "ID Solicitud",
        petName: "Mascota",
        applicantName: "Solicitante",
        requestDate: "Fecha Solicitud",
        requestStatus: "Estado",
        addRequest: "Añadir Solicitud",
        requestDetailsTitle: "Detalles de la Solicitud",
        requestIdLabel: "ID Solicitud:",
        applicantNameLabel: "Solicitante:",
        requestDateLabel: "Fecha de Solicitud:",
        requestStatusLabel: "Estado:",
        initialCommentsLabel: "Comentarios Iniciales:",
        observationsLabel: "Observaciones (Admin):",
        petInfoTitle: "Información de la Mascota",
        applicantInfoTitle: "Información del Solicitante",
        userEmailLabel: "Email:",
        userPhoneLabel: "Teléfono:",
        userAddressLabel: "Dirección:",
        updateRequestStatus: "Actualizar Estado de Solicitud",
        newStatusLabel: "Nuevo Estado:",
        statusPending: "Pendiente",
        statusApproved: "Aprobada",
        statusRejected: "Rechazada",
        statusCancelled: "Cancelada",
        saveRequest: "Guardar Solicitud",
        petIdLabel: "ID Mascota:",
        userIdLabel: "ID Solicitante:",
        backButton: "Atrás",

        // --- Traducciones para la Gestión de Refugios (refugios.html) ---
        manageSheltersTitle: "Gestionar Refugios",
        searchSheltersPlaceholder: "Buscar refugios...",
        shelterId: "ID Refugio",
        shelterName: "Nombre",
        shelterAddress: "Dirección",
        shelterCity: "Ciudad",
        shelterCountry: "País",
        shelterPhone: "Teléfono",
        shelterEmail: "Email",
        shelterLatitude: "Latitud",
        shelterLongitude: "Longitud",
        shelterStatus: "Estado",
        addShelter: "Añadir Refugio",
        editShelter: "Editar Refugio",
        saveShelter: "Guardar Refugio",
        shelterDetailsTitle: "Detalles del Refugio",
        shelterNameLabel: "Nombre:",
        shelterAddressLabel: "Dirección:",
        shelterCityLabel: "Ciudad:",
        shelterCountryLabel: "País:",
        shelterPhoneLabel: "Teléfono:",
        shelterEmailLabel: "Email:",
        shelterLatitudeLabel: "Latitud:",
        shelterLongitudeLabel: "Longitud:",
        shelterStatusLabel: "Estado:",
        statusActive: "Activo",
        statusInactive: "Inactivo",

        // --- Traducciones para la Gestión de Eventos (eventos.html) ---
        manageEventsTitle: "Gestionar Eventos",
        searchEventsPlaceholder: "Buscar eventos...",
        eventId: "ID Evento",
        eventName: "Nombre del Evento",
        eventDescription: "Descripción",
        eventDateTime: "Fecha y Hora",
        eventLocation: "Ubicación",
        eventOrganizer: "Organizador",
        eventMaxCapacity: "Cupo Máximo",
        eventStatus: "Estado",
        addEvent: "Añadir Evento",
        editEvent: "Editar Evento",
        saveEvent: "Guardar Evento",
        eventDetailsTitle: "Detalles del Evento",
        eventNameLabel: "Nombre del Evento:",
        eventDescriptionLabel: "Descripción:",
        eventDateLabel: "Fecha:",
        eventTimeLabel: "Hora:",
        eventLocationLabel: "Ubicación:",
        eventOrganizerLabel: "Organizador:",
        eventMaxCapacityLabel: "Cupo Máximo:",
        eventStatusLabel: "Estado:",
        // Claves corregidas para coincidir con los valores de la base de datos
        statusProgramado: "Programado", 
        statusCancelado: "Cancelado", // Corregido de 'Cancelled'
        statusCompletado: "Completado", // Corregido de 'Completed'
        statusActivoEvento: "Activo", // Para el estado general del registro del evento
        statusInactivoEvento: "Inactivo" // Para el estado general del registro del evento
    },
    en: {
        appName: "Adoption System",
        selectLanguage: "Select Language",
        footerText: "&copy; 2025 Pet Adoption Management System. All rights reserved.",
        welcomeTitle: "Welcome to the Adoption System",
        welcomeText: "Find your perfect furry companion or help a pet find a home.",
        loginButton: "Login",
        registerButton: "Register",
        loginTitle: "Login",
        loginUsernamePlaceholder: "Username (Email)",
        loginPasswordPlaceholder: "Password",
        loginSubmitButton: "Enter",
        loginRegisterLink: "Don't have an account? Register here.",
        registrationTitle: "User Registration",
        registrationNamePlaceholder: "Full Name",
        registrationEmailPlaceholder: "Email Address",
        registrationPasswordPlaceholder: "Password",
        registrationConfirmPasswordPlaceholder: "Confirm Password",
        registrationSubmitButton: "Register",
        registrationLoginLink: "Already have an account? Login here.",
        requiredField: "This field is required.",
        invalidEmail: "Please enter a valid email address.",
        passwordTooShort: "Password must be at least 6 characters long.",
        passwordMismatch: "Passwords do not match.",
        loginSuccess: "Login successful!",
        loginError: "Login error.",
        registrationSuccess: "Registration successful! You can now log in.",
        registrationError: "Registration error.",
        generalError: "An unexpected error occurred. Please try again.",
        unauthorizedError: "Unauthorized. Please log in.",
        noRecordsFound: "No records found.",
        createSuccess: "Creation successful!",
        createError: "Error creating record.",
        formCorrectionError: "Please correct the errors in the form.",

        // --- Admin Dashboard English translations ---
        adminDashboardTitle: "Admin Dashboard",
        totalPetsAvailable: "Total Pets Available",
        pendingAdoptions: "Pending Adoption Requests",
        completedAdoptions: "Completed Adoptions",
        manageUsers: '<i class="fas fa-users me-2"></i> Manage Users',
        managePets: '<i class="fas fa-cat me-2"></i> Manage Pets',
        viewPetsList: '<i class="fas fa-paw me-2"></i> View Pets List',
        manageAdoptionRequests: '<i class="fas fa-clipboard-list me-2"></i> Manage Adoption Requests',
        manageShelters: '<i class="fas fa-home me-2"></i> Manage Shelters', 
        manageEvents: '<i class="fas fa-calendar-alt me-2"></i> Manage Events', 
        viewStatistics: '<i class="fas fa-chart-bar me-2"></i> View Statistics & Reports',
        logoutButton: "Logout",
        goToManageUsers: "Go to User Management",

        // --- Pet Management (pets.html) English translations ---
        petsAvailableForAdoption: "Pets Available for Adoption",
        searchPlaceholder: "Search...",
        filterBySpecies: "Filter by Species",
        filterBySize: "Filter by Size",
        addPet: "Add Pet",
        save: "Save Pet",
        viewDetails: "View Details",
        adoptButton: "Adopt",
        editButton: "Edit",
        deleteButton: "Delete",

        // Translations for the pet details modal
        petDetailsTitle: "Pet Details",
        petNameLabel: "Name:",
        speciesLabel: "Species:",
        breedLabel: "Breed:",
        ageLabel: "Age:",
        yearsLabel: "years",
        sexLabel: "Sex:",
        sizeLabel: "Size:",
        descriptionLabel: "Description:",
        rescueDateLabel: "Rescue Date:",
        adoptionStatusLabel: "Adoption Status:",
        statusLabel: "Status (Record):",
        registeredByLabel: "Registered by (User ID):",
        shelterIdLabel: "Shelter ID:",
        closeButton: "Close",

        // Translations for the pet edit modal
        editPet: "Edit Pet",
        saveChanges: "Save Changes",
        updateSuccess: "Update successful!",
        updateError: "Error updating record.",

        // Translations for delete confirmation with SweetAlert2
        confirmDeleteTitle: "Are you sure?",
        confirmDeleteText: "You won't be able to revert this!",
        yesDeleteIt: "Yes, delete it!",
        deleteSuccess: "Deleted!",
        deleteError: "Error deleting.",
        cancelButton: "Cancel",

        // --- User Management (users.html) English translations ---
        manageUsersTitle: "Manage Users",
        searchUsersPlaceholder: "Search users...",
        userId: "ID",
        userName: "Name",
        userLastName: "Last Name",
        userEmail: "Email",
        userRole: "Role",
        userStatus: "Status",
        actions: "Actions",
        addUser: "Add User",
        editUser: "Edit User",
        userPassword: "Password",
        saveUser: "Save User",

        // --- Adoption Requests Management (solicitudes-adopcion.html) English translations ---
        manageAdoptionRequestsTitle: "Manage Adoption Requests",
        searchRequestsPlaceholder: "Search requests...",
        requestId: "Request ID",
        petName: "Pet",
        applicantName: "Applicant",
        requestDate: "Request Date",
        requestStatus: "Status",
        addRequest: "Add Request",
        requestDetailsTitle: "Request Details",
        requestIdLabel: "Request ID:",
        applicantNameLabel: "Applicant:",
        requestDateLabel: "Request Date:",
        requestStatusLabel: "Status:",
        initialCommentsLabel: "Initial Comments:",
        observationsLabel: "Observations (Admin):",
        petInfoTitle: "Pet Information",
        applicantInfoTitle: "Applicant Information",
        userEmailLabel: "Email:",
        userPhoneLabel: "Phone:",
        userAddressLabel: "Address:",
        updateRequestStatus: "Update Request Status",
        newStatusLabel: "New Status:",
        statusPending: "Pending",
        statusApproved: "Approved",
        statusRejected: "Rejected",
        statusCancelled: "Cancelled",
        saveRequest: "Save Request",
        petIdLabel: "Pet ID:",
        userIdLabel: "Applicant ID:",
        backButton: "Back",

        // --- English translations for Shelter Management (refugios.html) ---
        manageSheltersTitle: "Manage Shelters",
        searchSheltersPlaceholder: "Search shelters...",
        shelterId: "Shelter ID",
        shelterName: "Name",
        shelterAddress: "Address",
        shelterCity: "City",
        shelterCountry: "Country",
        shelterPhone: "Phone",
        shelterEmail: "Email",
        shelterLatitude: "Latitude",
        shelterLongitude: "Longitude",
        shelterStatus: "Status",
        addShelter: "Add Shelter",
        editShelter: "Edit Shelter",
        saveShelter: "Save Shelter",
        shelterDetailsTitle: "Shelter Details",
        shelterNameLabel: "Name:",
        shelterAddressLabel: "Address:",
        shelterCityLabel: "City:",
        shelterCountryLabel: "Country:",
        shelterPhoneLabel: "Phone:",
        shelterEmailLabel: "Email:",
        shelterLatitudeLabel: "Latitude:",
        shelterLongitudeLabel: "Longitude:",
        shelterStatusLabel: "Status:",
        statusActive: "Active",
        statusInactive: "Inactive",

        // --- English translations for Event Management (eventos.html) ---
        manageEventsTitle: "Manage Events",
        searchEventsPlaceholder: "Search events...",
        eventId: "Event ID",
        eventName: "Event Name",
        eventDescription: "Description",
        eventDateTime: "Date and Time",
        eventLocation: "Location",
        eventOrganizer: "Organizer",
        eventMaxCapacity: "Max Capacity",
        eventStatus: "Status",
        addEvent: "Add Event",
        editEvent: "Edit Event",
        saveEvent: "Save Event",
        eventDetailsTitle: "Event Details",
        eventNameLabel: "Event Name:",
        eventDescriptionLabel: "Description:",
        eventDateLabel: "Date:",
        eventTimeLabel: "Time:",
        eventLocationLabel: "Location:",
        eventOrganizerLabel: "Organizer:",
        eventMaxCapacityLabel: "Max Capacity:",
        eventStatusLabel: "Status:",
        // Corrected keys to match database values
        statusProgramado: "Scheduled", 
        statusCancelado: "Cancelled", 
        statusCompletado: "Completed", 
        statusActivoEvento: "Active", 
        statusInactivoEvento: "Inactive" 
    }
};

let currentLanguage = localStorage.getItem('currentLanguage') || 'es'; 

function applyTranslations() {
    $('[data-lang-key]').each(function() {
        const key = $(this).data('lang-key');
        if (translations[currentLanguage] && translations[currentLanguage][key]) {
            if ($(this).is('input[placeholder]') || $(this).is('textarea[placeholder]')) {
                $(this).attr('placeholder', translations[currentLanguage][key]);
            } 
            else {
                $(this).html(translations[currentLanguage][key]);
            }
        }
    });
}

function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('currentLanguage', lang); 
    applyTranslations();
    $('#languageSelect').val(lang);
}

$(document).ready(function() {
    $('#languageSelect').val(currentLanguage);
    applyTranslations();
});

window.translations = translations;
window.currentLanguage = currentLanguage;
window.applyTranslations = applyTranslations;
window.setLanguage = setLanguage;
